<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Select</title>
   
    <link rel="stylesheet" href="../css/personagens.css">
    <link rel="shortcut icon" href="../imagens/Homem aranha topo.png" />
    <link rel="stylesheet" href="../css/navDash.css">
    <script src="../js/funcoes.js"></script>

</head>
<body>

    
    <div class="nav">
        <b>Bem vindo</b> <b id="b_usuario"></b>
      <a class="agora" href="">Card Figth</a>
      <a href="pesquisa.html">Votação</a>
      <a href="../index.html">Voltar</a>
    </div>
    <span class="tutorial">
        <div id="att"><p>Ataque</p></div>
        <div id="heal"><p>Hp</p></div>
        <div id="def"><p>Defesa</p></div>

        <div class="botao">
            <button class="fight" id="btn" style="display: none;" onclick="lutar()"><i>Fight</i></button>
        </div>

    </span>

    

    <div class="conteudo">

    <div class="personagens">
        
       
         <div id="div_viloes">
                
            </div>

        </div> 


        <div  class="card">
            <div class="carta">
                <div class="circulo"></div>
                 <div id="nome" class="nome"></div>
                  <div id="imagem" class="imagens"></div>
                     <div class="retangulo">
                        <div id="defesa" class="defesa"></div>
                        <div id="hp" class="hp"></div>
                        <div id="attack" class="ataque"></div>
                     </div>
            </div>
        </div>
        
         <div class="personagens">
             <div id="div_heroes">
                    
                </div>
            </div>

    </div>
      
</body>
</html>
<script>

    b_usuario.innerHTML = sessionStorage.NOME_USUARIO;

    var time = [];
    var cpu =[];


    var idHeroes = document.getElementById("div_heroes")
    var idViloes= document.getElementById("div_viloes")

    function invocar() {
    fetch("/personagem/invocar", {
        method: "GET",
        headers: {
            "Content-type": "application/json"
        }
    }).then(async function (resposta) {
        const vetor = await resposta.json()
        for (let i = 0; i < vetor.length; i++) {
            const element = vetor[i];
            var newImg = document.createElement("img")
            newImg.src = element.url
            newImg.style.height = "100px"
            newImg.style.width = "100px"
            newImg.addEventListener('click', function() {
                selecionar(element)
                if (time.length<= 5) {
                    time.push(element.nome)
                } else{
                    alert ('Time cheio')
                }
            })

           
            if (element.hero) {
                idHeroes.appendChild(newImg)
            } else {
                idViloes.appendChild(newImg)
            }

           

        }
        
    })
    
}

 
function lutar() {
        window.location = "cenarioSelect.html"

}

function selecionar(params) {
    imagem.innerHTML = `<img src="${params.url}" >`
    nome.innerHTML = `${params.nome}` 
    hp.innerHTML = `${params.heal_points}` 
    defesa.innerHTML = `${params.defense}` 
    attack.innerHTML = `${params.attack}` 
    
    if (time.length == 5) {
            btn.style.display = "block"
        }
}

window.onload = () => {
    
    invocar()
}

    
</script>